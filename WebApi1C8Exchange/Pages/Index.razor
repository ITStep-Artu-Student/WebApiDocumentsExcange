@page "/"
@attribute [Authorize(Roles ="Admin, User")]

@using Microsoft.EntityFrameworkCore
@using Radzen
@using System.Text.Unicode
@using WebApiDocumentsExchange.Models
@using WebApiDocumentsExchange.Data

@inherits sabatex.Blazor.UIConrols.BasePage<ObjectExchange,ExchangeDbContext>

<PageTitle>Index</PageTitle>
<RadzenDataGrid Data="@DataGridItems"
                TItem="ObjectExchange"
                @ref="DataGrid"
                AllowFiltering="true"
                AllowColumnResize="true"
                AllowPaging="true"
                PageSize="10"
                AllowSorting="true"
                SelectionMode="DataGridSelectionMode.Single"
                @bind-Value=@DataGridSelectedItems>
    <Columns>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="Sender" Title="Sender" MinWidth="200px"/>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="Destination" Title="Destination" MinWidth="100px"/>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="ObjectId" Title="Object Id" MinWidth="100px"/>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="ObjectType" Title="Object Type" MinWidth="200px"/>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="DateStamp" Title="DateStamp" MinWidth="100px"/>
         <RadzenDataGridColumn TItem="ObjectExchange" Property="ObjectJSON" Title="JSON" MinWidth="100px"/>
         <RadzenDataGridColumn TItem="ObjectExchange"  Filterable=false Sortable=false TextAlign="TextAlign.Center" Width="50px">
             <Template Context="client">
                <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Light" Class="m-1" Click="@(args => DeleteRow(client))"
                          @onclick:stopPropagation="true" />
             </Template>
        </RadzenDataGridColumn>

     </Columns>
</RadzenDataGrid>


@code {
    protected override void OnInitialized()
    {
        DataGridItems = dbContext.ObjectExchanges;
    }
}